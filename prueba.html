<script language="JavaScript1.2" type="text/javascript">
/* Cambia_idioma Javascript 0.2
    imaginatic dhtml         dhtml@imaginatic.com
   
    Este script cambia entre diferentes idiomas en una pagina web
    utilizando un sufijo en el nombre del archivo, por ejemplo
   
    nombre.html  nombre-fr.html nombre-en.html
   
    Este script puede ser utilizado y manipulado libremente, incluso
    sin mantener esta nota. No tiene ningun tipo de garantia.
*/

var sufijos = new Array ();
sufijos = {'es':'','fr':'fr','en':'en'}; // definicion de los diferentes sufijos, dejando vacio el idioma por defecto

var largo_sufijo = 2; // los sufijos definidos anteriormente deben tener todos el mismo largo, especificado aqui

var separador = '-';  // separador, no utilzar signos como #, ? o un punto. El script puede no funcionar si hay puntos
                      // o guiones después de la extensión del archivo

var pagina_indice = 'index.html'; // pagina por defecto, se utiliza cuando no esta presente el nombre de archivo en la URl

function cambia_idioma (idioma){
	url_completa = document.location.href;
	url_host = document.location.host;
	url_texto = url_completa.substring (url_completa.lastIndexOf ('//') + 2);
	if (url_texto.lastIndexOf ('.') < url_host.length){
  if (url_texto.lastIndexOf ('/') == (url_texto.length - 1)){
 	 url_completa = url_completa + pagina_indice;
  } else {
 	 url_completa = url_completa + '/' + pagina_indice;
  }
	}
	posicion_separador = url_completa.lastIndexOf (separador);
	if (sufijos[idioma] == ''){
  if (posicion_separador != -1){
    inicio_url = url_completa.substring (0,posicion_separador);
    final_url = url_completa.substr (posicion_separador + separador.length + largo_sufijo);
    document.location.href = inicio_url + final_url;
  }
	} else {
  if (posicion_separador == -1){
 	 punto_final = url_completa.lastIndexOf ('.');
 	 inicio_url = url_completa.substring (0,punto_final);
 	 final_url = url_completa.substr (punto_final);
 	 document.location.href = inicio_url + separador + idioma + final_url;
  } else if (url_completa.lastIndexOf (separador + idioma + '.') == -1){
    inicio_url = url_completa.substring (0,posicion_separador);
    final_url = url_completa.substr (posicion_separador + separador.length + largo_sufijo);
    nueva_url = inicio_url + separador + sufijos[idioma] + final_url;
    document.location.href = nueva_url;
  }
	}
}
</script>
